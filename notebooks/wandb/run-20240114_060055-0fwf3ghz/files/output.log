[34m[1mwandb[39m[22m: Streaming LangChain activity to W&B at https://wandb.ai/bradley-euell/langchain-tracing/runs/0fwf3ghz
[34m[1mwandb[39m[22m: `WandbTracer` is currently in beta.
[34m[1mwandb[39m[22m: Please report any issues to https://github.com/wandb/wandb/issues with the tag `langchain`.
Collecting zep-python
  Downloading zep_python-1.5.0-py3-none-any.whl.metadata (2.9 kB)
Collecting httpx<0.25.0,>=0.24.0 (from zep-python)
  Downloading httpx-0.24.1-py3-none-any.whl.metadata (7.4 kB)
Requirement already satisfied: packaging<24.0,>=23.1 in /usr/local/python/3.10.13/lib/python3.10/site-packages (from zep-python) (23.2)
Requirement already satisfied: pydantic>=1.10.7 in /usr/local/python/3.10.13/lib/python3.10/site-packages (from zep-python) (1.10.13)
Requirement already satisfied: certifi in /usr/local/python/3.10.13/lib/python3.10/site-packages (from httpx<0.25.0,>=0.24.0->zep-python) (2023.11.17)
Collecting httpcore<0.18.0,>=0.15.0 (from httpx<0.25.0,>=0.24.0->zep-python)
  Downloading httpcore-0.17.3-py3-none-any.whl.metadata (18 kB)
Requirement already satisfied: idna in /usr/local/python/3.10.13/lib/python3.10/site-packages (from httpx<0.25.0,>=0.24.0->zep-python) (3.6)
Requirement already satisfied: sniffio in /usr/local/python/3.10.13/lib/python3.10/site-packages (from httpx<0.25.0,>=0.24.0->zep-python) (1.3.0)
Requirement already satisfied: typing-extensions>=4.2.0 in /usr/local/python/3.10.13/lib/python3.10/site-packages (from pydantic>=1.10.7->zep-python) (4.9.0)
Requirement already satisfied: h11<0.15,>=0.13 in /usr/local/python/3.10.13/lib/python3.10/site-packages (from httpcore<0.18.0,>=0.15.0->httpx<0.25.0,>=0.24.0->zep-python) (0.14.0)
Requirement already satisfied: anyio<5.0,>=3.0 in /usr/local/python/3.10.13/lib/python3.10/site-packages (from httpcore<0.18.0,>=0.15.0->httpx<0.25.0,>=0.24.0->zep-python) (4.2.0)
Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/python/3.10.13/lib/python3.10/site-packages (from anyio<5.0,>=3.0->httpcore<0.18.0,>=0.15.0->httpx<0.25.0,>=0.24.0->zep-python) (1.2.0)
Downloading zep_python-1.5.0-py3-none-any.whl (27 kB)
Downloading httpx-0.24.1-py3-none-any.whl (75 kB)
   [90m‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ[39m [32m75.4/75.4 kB[39m [31m1.7 MB/s[39m eta [36m0:00:00
[?25hDownloading httpcore-0.17.3-py3-none-any.whl (74 kB)
   [90m‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ[39m [32m74.5/74.5 kB[39m [31m2.4 MB/s[39m eta [36m0:00:00
[?25hInstalling collected packages: httpcore, httpx, zep-python
  Attempting uninstall: httpcore
    Found existing installation: httpcore 1.0.2
    Uninstalling httpcore-1.0.2:
      Successfully uninstalled httpcore-1.0.2
  Attempting uninstall: httpx
    Found existing installation: httpx 0.26.0
    Uninstalling httpx-0.26.0:
      Successfully uninstalled httpx-0.26.0
Successfully installed httpcore-0.17.3 httpx-0.24.1 zep-python-1.5.0
Note: you may need to restart the kernel to use updated packages.
Traceback (most recent call last):
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
    yield
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpcore/_backends/sync.py", line 206, in connect_tcp
  File "/home/codespace/.python/current/lib/python3.10/socket.py", line 845, in create_connection
    raise err
  File "/home/codespace/.python/current/lib/python3.10/socket.py", line 833, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpx/_transports/default.py", line 67, in map_httpcore_exceptions
    # We want to map to the most specific exception we can find.
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpx/_transports/default.py", line 231, in handle_request
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpcore/_sync/connection_pool.py", line 268, in handle_request
    # has been released.
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpcore/_sync/connection_pool.py", line 251, in handle_request
    # requests are queued waiting for a single connection, which
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    timeouts = request.extensions.get("timeout", {})
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    if http2_negotiated or (self._http2 and not self._http1):
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpcore/_sync/connection.py", line 124, in _connect
    }
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
  File "/home/codespace/.python/current/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 111] Connection refused
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/home/codespace/.python/current/lib/python3.10/site-packages/zep_python/zep_client.py", line 115, in _healthcheck
    response = httpx.get(url)
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpx/_api.py", line 196, in get
    proxies=proxies,
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpx/_api.py", line 104, in request
    data=data,
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpx/_client.py", line 828, in request
    cookies: typing.Optional[CookieTypes] = None,
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpx/_client.py", line 915, in send
    raise exc
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpx/_client.py", line 943, in _send_handling_auth
    history.append(response)
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpx/_client.py", line 980, in _send_handling_redirects
    else:
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpx/_client.py", line 1016, in _send_single_request
    request.url,
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpx/_transports/default.py", line 230, in handle_request
    self._pool.close()
  File "/home/codespace/.python/current/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/codespace/.python/current/lib/python3.10/site-packages/httpx/_transports/default.py", line 84, in map_httpcore_exceptions
    httpcore.WriteTimeout: WriteTimeout,
httpx.ConnectError: [Errno 111] Connection refused
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.10/site-packages/IPython/core/interactiveshell.py", line 3550, in run_code
    exec(code_obj, self.user_global_ns, self.user_ns)
  File "/tmp/ipykernel_44361/2254780765.py", line 4, in <module>
    zep_memory = ZepMemory(session_id=session_id, url=ZEP_API_URL, api_key=zep_api_key)
  File "/home/codespace/.python/current/lib/python3.10/site-packages/langchain/memory/zep_memory.py", line 91, in __init__
    chat_message_history = ZepChatMessageHistory(
  File "/home/codespace/.python/current/lib/python3.10/site-packages/langchain_community/chat_message_histories/zep.py", line 67, in __init__
    self.zep_client = ZepClient(base_url=url, api_key=api_key)
  File "/home/codespace/.python/current/lib/python3.10/site-packages/zep_python/zep_client.py", line 88, in __init__
    self._healthcheck(base_url)
  File "/home/codespace/.python/current/lib/python3.10/site-packages/zep_python/zep_client.py", line 138, in _healthcheck
    raise APIError(None, error_msg) from e
zep_python.exceptions.APIError: Failed to connect to Zep server. Please check that:
         - the server is running
         - the API URL is correct
         - No other process is using the same port
         : None
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.10/site-packages/IPython/core/interactiveshell.py", line 2144, in showtraceback
    stb = self.InteractiveTB.structured_traceback(
  File "/home/codespace/.local/lib/python3.10/site-packages/IPython/core/ultratb.py", line 1435, in structured_traceback
    return FormattedTB.structured_traceback(
  File "/home/codespace/.local/lib/python3.10/site-packages/IPython/core/ultratb.py", line 1326, in structured_traceback
    return VerboseTB.structured_traceback(
  File "/home/codespace/.local/lib/python3.10/site-packages/IPython/core/ultratb.py", line 1192, in structured_traceback
    formatted_exceptions += self.format_exception_as_a_whole(etype, evalue, etb, lines_of_context,
  File "/home/codespace/.local/lib/python3.10/site-packages/IPython/core/ultratb.py", line 1088, in format_exception_as_a_whole
    frames.append(self.format_record(record))
  File "/home/codespace/.local/lib/python3.10/site-packages/IPython/core/ultratb.py", line 970, in format_record
    frame_info.lines, Colors, self.has_colors, lvals
  File "/home/codespace/.local/lib/python3.10/site-packages/IPython/core/ultratb.py", line 792, in lines
    return self._sd.lines
  File "/home/codespace/.local/lib/python3.10/site-packages/stack_data/utils.py", line 145, in cached_property_wrapper
    value = obj.__dict__[self.func.__name__] = self.func(obj)
  File "/home/codespace/.local/lib/python3.10/site-packages/stack_data/core.py", line 734, in lines
    pieces = self.included_pieces
  File "/home/codespace/.local/lib/python3.10/site-packages/stack_data/utils.py", line 145, in cached_property_wrapper
    value = obj.__dict__[self.func.__name__] = self.func(obj)
  File "/home/codespace/.local/lib/python3.10/site-packages/stack_data/core.py", line 681, in included_pieces
    pos = scope_pieces.index(self.executing_piece)
  File "/home/codespace/.local/lib/python3.10/site-packages/stack_data/utils.py", line 145, in cached_property_wrapper
    value = obj.__dict__[self.func.__name__] = self.func(obj)
  File "/home/codespace/.local/lib/python3.10/site-packages/stack_data/core.py", line 660, in executing_piece
    return only(
  File "/home/codespace/.local/lib/python3.10/site-packages/executing/executing.py", line 116, in only
    raise NotOneValueFound('Expected one value, found 0')
executing.executing.NotOneValueFound: Expected one value, found 0
